node {

        stage('Checkout') {
            git url: 'https://github.com/basivireddy/microservice-app-example.git', credentialsId: 'github-basivireddy', branch: 'master'
        }

        
	stage('Build and push') {
	   
	          
            dir ('log-message-processor') {
                  def app = docker.build "private-registry:5000/log-message-processor:v1.${env.BUILD_NUMBER}" .
                  app.push()
           }
		
	}
	
	

    

}
